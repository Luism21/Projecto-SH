<!DOCTYPE html>
<html>
  <head>
	  <meta name="name" content="content">
	  <title>Há incêndio?</title>
		  <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
	          <script type="text/javascript" src="gmaps.js"> </script>
		  <script type="text/javascript" src="core.js"></script>
		  <script type="text/javascript" src="jquery-1.8.1.min.js"></script>
		  <link href="style_route.css" rel="stylesheet" type="text/css"/> 
		  <script type="text/javascript" charset="utf-8">
		  function showAddress(address) {
		      if (geocoder) {
			geocoder.getLatLng(
			  address,
			  function(point) {
				    if (!point) {
				      alert(address + " not found");
				    } else {
				      map.setCenter(point, 15);
				      var marker = new GMarker(point, {draggable: true});
				      map.addOverlay(marker);
				      GEvent.addListener(marker, "dragend", function() {
					marker.openInfoWindowHtml(marker.getLatLng().toUrlValue(6));
				      });
				      GEvent.addListener(marker, "click", function() {
					marker.openInfoWindowHtml(marker.getLatLng().toUrlValue(6));
				      });
				      GEvent.trigger(marker, "click");
				    }
				  }
				);
			      }
			  }
    	
		  </script>
		  <script type="text/javascript" >

			var map;
			var route;

		function routes(){
			$('#forward').attr('disabled', 'disabled');
			$('#back').attr('disabled', 'disabled');
			$('#get_route').click(function(e){
				e.preventDefault();
				origin = map.markers[0].getPosition();

				destination = map.markers[map.markers.length-1].getPosition();
				map.getRoutes({
				origin: [origin.lat(), origin.lng()],
				destination: [destination.lat(), destination.lng()],
				travelMode: 'driving',
				callback: function(e){
				route = new GMaps.Route({
					map: map,
					route: e[0],
					strokeColor: '#336699',
					strokeOpacity: 0.5,
					strokeWeight: 10
					});
				$('#forward').removeAttr('disabled');
				$('#back').removeAttr('disabled');
				}
				});

			$('#forward').click(function(e){
			e.preventDefault();
			route.forward();
			if(route.step_count < route.steps_length)
			$('#steps').append('<li>'+route.steps[route.step_count].instructions+'</li>');
			});
			$('#back').click(function(e){
			e.preventDefault();
			route.back();
			if(route.step_count >= 0)
			$('#steps').find('li').last().remove();
			});
			});

		}); 
		window.onload= routes;	
		  </script>
  </head>
  <body> 
	    <div class="content">
		    <h1 id="main_title">Há incêndio?</h1>
					    <div class="poppin">
								<div id="map"> </div>
					    </div>
							<form id="geocoding_form" method="post">
								<label for="address"><label>
								<div id="input">
									<input type="text" id="address"> 
									<input id="search_button" type="submit" value="Search" class="btn">
								</div>
							</form>		
								
	    </div>
			<div id="footer">
				<a class="btn" id="forward" href="# "value="Forward" disabled="disabled">
				<a class="btn" id="backward" href="#" value="Backward" disabled="disabled">
				<a class="btn" id="get_route" href="#" value="Get Route" disabled="disabled">
			</div>
    </body>

</html>
